<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Search Results</title>
  <link rel="stylesheet" href="../css/style.css" />
</head>
<body>
  <script>
    window.onload = function() {
      fetch('../php/check_session.php')
        .then(response => response.json())
        .then(data => {
          const userLink = document.getElementById('userLink');
    
          if (!data.logged_in) {
            // Not logged in: if on index, redirect to login
            if (window.location.pathname.indexOf('index.html') !== -1) {
              window.location.href = 'login.html';
            }
          } else {
            // Logged in: change the Login link to Profile link
            if (userLink) {
              userLink.href = '../php/profile.php'; // Redirect to profile page
              userLink.textContent = 'Profile';     // Change link text to "Profile"
            }
          }
        })
        .catch(error => {
          console.error('Error checking session:', error);
        });
    };
    </script>
    <header>
      <h1>StackClone</h1>

      <div class="search-container">
        <input type="text" id="searchInput" placeholder="Search questions..." />
        <button id="searchBtn">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
          </svg>
        </button>
      </div>

      <a href="index.html" class="home-link">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house" viewBox="0 0 16 16">
          <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5z"/>
        </svg>
      </a>
      
      <a href="login.html" id="userLink">Login</a>
      
    </header>
<main>
  <div id="results">Loading...</div>
</main>
  <footer>
    <p>&copy; 2025 StackClone</p>
  </footer>
  <script src="../js/search.js"></script>

</body>
</html>